<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finalizar compra - LUXEL</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="shortcut icon" href="img/logo luxel-01.svg" type="image/x-icon">
<link rel="stylesheet" href="style.css">
<style>
  body {
    background-color: #fdfaf6;
    font-family: "Inter", sans-serif;
    color: #6d4c2e;
    padding-top: 2.5rem;
  }
  .checkout-title {
    font-family: "Bodoni Moda", serif;
    font-weight: bolder;
    font-size: 2rem;
    margin-bottom: 1.5rem;
  }
  .section-box {
    background: #fff;
    border: 1px solid #e0d6c6;
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
  }
  .section-title {
    font-weight: 600;
    margin-bottom: .75rem;
  }
  label {
    font-weight: 500;
    margin-bottom: .25rem;
  }
  input, select {
    border: 1px solid #c2a17d;
    border-radius: 6px;
  }
  .btn-comprar {
    background-color: #6d4c2e;
    color: #fff;
    text-transform: uppercase;
    letter-spacing: .05em;
    border-radius: 50px;
    padding: .75rem 1.5rem;
    font-weight: 600;
    width: 100%;
  }
  .btn-comprar:hover {
    background-color: #8b5e2b;
  }
  .resumen-producto img {
    width: 50px;
    border-radius: 4px;
    object-fit: cover;
    margin-right: .75rem;
  }
</style>
</head>
<body>
<div class="container py-5">
  <h1 class="checkout-title mb-4 ">Finalizar la compra</h1>
  <div class="row g-4">
    <!-- Formulario -->
    <div class="col-lg-7">
      <div class="section-box">
        <h5 class="section-title">Datos personales</h5>
        <div class="mb-3">
          <label for="nombre">Nombre completo*</label>
          <input type="text" class="form-control" id="nombre" placeholder="Ej: Lucia Ast">
        </div>
        <div class="mb-3">
          <label for="telefono">Teléfono/Celular*</label>
          <input type="tel" class="form-control" id="telefono" placeholder="Ej: 1154210218">
        </div>
        <div class="mb-3">
          <label for="dni">Número de documento (DNI)*</label>
          <input type="text" class="form-control" id="dni" placeholder="Ej: 46732711">
        </div>
        <div class="mb-3">
          <label for="direccion">Dirección*</label>
          <input type="text" class="form-control" id="direccion" placeholder="Ej: Calle Falsa 123">
        </div>
      </div>
      <div class="section-box">
        <h5 class="section-title">Método de pago</h5>
        <select class="form-select">
          <option selected>Selecciona un método</option>
          <option>Tarjeta de crédito</option>
          <option>Tarjeta de débito</option>
          <option>Mercado Pago</option>
          <option>Efectivo</option>
        </select>
      </div>
      <form id="compraForm">
      <button type="submit" class="btn btn-comprar">Comprar</button>
      </form>
    </div>

    <!-- Resumen -->
    <div class="col-lg-5">
      <div class="section-box">
        <h5 class="section-title">Resumen de mi compra</h5>
        <div id="resumen-productos"></div>
        <div class="mt-3">
          <div class="d-flex justify-content-between">
            <span>Subtotal</span><span id="subtotal">$ 0.00</span>
          </div>
          <div class="d-flex justify-content-between">
            <span>Costo de envío</span><span>$ 0.00</span>
          </div>
          <hr>
          <div class="d-flex justify-content-between fw-bold">
            <span>Total</span><span id="total">$ 0.00</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Script para mostrar productos -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  const resumen = document.getElementById('resumen-productos');
  const subtotalEl = document.getElementById('subtotal');
  const totalEl = document.getElementById('total');
  let subtotal = 0;

  cart.forEach(item => {
    const div = document.createElement('div');
    div.className = 'd-flex align-items-center resumen-producto mb-2';
    div.innerHTML = `
      <img src="${item.imagen}" alt="${item.nombre}">
      <div>
        <div>${item.nombre}</div>
        <div>${item.precio}</div>
      </div>
    `;
    resumen.appendChild(div);
    const precioNum = parseFloat(item.precio.replace(/[^\d.-]/g, '')) || 0;
    subtotal += precioNum;
  });
  subtotalEl.textContent = '$ ' + subtotal.toFixed(2);
  totalEl.textContent = '$ ' + subtotal.toFixed(2);
});
</script>
<script>
document.getElementById('compraForm').addEventListener('submit', function(e) {
  e.preventDefault(); // evita recargar
  localStorage.removeItem('cart'); // limpia carrito
  window.location.href = 'index.html'; // vuelve al inicio
});
</script>
</body>
</html>